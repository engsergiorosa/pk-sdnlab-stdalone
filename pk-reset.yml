---
# purpose: Create dummies interfaces abd bridges.
# purpose: Create devices in packet.net site.
# CAUTION: WIll reboot the KVM server
# CAUTION: It would change your selinux, forwarding and iptables seetings
# CAUTION: Will disable NetworkManager and firewall
# Author: Mauricio Rojas / pinrojas.com
 
- hosts: localhost
  gather_facts: no
  remote_user: root
  vars:
    packet_token: uV2w2VGYYHjwKtqwf7HBVvSB88qg7XZo
    project_id: 0242eaf1-79b2-43d4-b6e0-d75aa15e3317
    bmetals:
      - { device_name: core ,
          bmetal_plan: baremetal_1 ,
          osystem: centos_7 ,
          facility: sjc1 ,
        }
      - { device_name: sdwan1 ,
          bmetal_plan: baremetal_0 ,
          osystem: centos_7 ,
          facility: sjc1 ,
        }
      - { device_name: sdwan2 ,
          bmetal_plan: baremetal_0 ,
          osystem: centos_7 ,
          facility: sjc1 ,
        }
      - { device_name: dc1 ,
          bmetal_plan: baremetal_0 ,
          osystem: centos_7 ,
          facility: sjc1 ,
        }
      - { device_name: dc2 ,
          bmetal_plan: baremetal_0 ,
          osystem: centos_7 ,
          facility: sjc1 ,
        }
  roles:
    - pk-reset
